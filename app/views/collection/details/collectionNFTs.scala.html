@import controllers.actions.LoginState
@import views.html.base.commonHorizontalSwitcher
@import scala.collection.immutable.ListMap

@(collection: master.Collection)(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: Option[LoginState])

<div class="item item-center nftContainer">
    <div class="profileCover">
        <div class="profileCoverContainer" id="collectionUncompressedCoverImage_@collection.id">
            @if(loginState.fold("")(_.username) == collection.creatorId) {
                <div class="editCollectionCover" onclick="getForm(jsRoutes.controllers.CollectionController.uploadCollectionFilesForm('@collection.id'))">
                    <i class="bi bi-pencil iconDefault"></i>
                </div>
            }
            @collection.getCoverFileURL.fold {
                <img src="@routes.Assets.versioned("images/defaultCollectionCover.png")"/>
            } { uri =>
                <img src="@uri">
            }
        </div>
    </div>

    <div class="mb-0 item item-center centerContainer">
        <div class="centerCard">
            <div class="contentContainer">
                @commonHorizontalSwitcher(
                    ListMap(
                        constants.View.COLLECTION_NFT -> (None, JavaScript(s"changeExploreStateOnSwitcher('${constants.View.COLLECTION_NFT}')")),
                        constants.View.COLLECTION_OFFER -> (routes.javascript.CollectionController.collectionOffer, JavaScript(s"changeExploreStateOnSwitcher('${constants.View.COLLECTION_OFFER}')")),
                    ),
                    constants.View.COLLECTION_NFT,
                    Symbol(constants.View.COLLECTION_NFT + "_PARAMETERS") -> s"'${collection.id}', 1",
                    Symbol(constants.View.COLLECTION_OFFER + "_PARAMETERS") -> s"'${constants.View.COLLECTION_OFFER}', 1"
                )
            </div>
        </div>
    </div>

    <div class="profile-card">
        <div class="profiles-container">
            <div class="nft-list">
                <div class="nft-list-container">
                    <div id="nftsPerPage" class="row m-0 nftsPerPage">
                    </div>
                </div>
                    <!-- Loader -->
                <div class="loading">
                    <div class="ball"></div>
                    <div class="ball"></div>
                    <div class="ball"></div>
                </div>
                    <!-- End -->
            </div>
        </div>
    </div>
</div>
<link href="@utilities.PublicResource.getVersionedRoute("stylesheets/explorer.css")"/>
<script src="@utilities.PublicResource.getVersionedRoute("javascripts/nfts/loadMore.js")" type="text/javascript"></script>
<script>
        loadFirstNFTs('@collection.id');
        checkAndPushState(jsRoutes.controllers.CollectionController.viewCollection('@collection.id').url, '@collection.id', "collection");
        window.onscroll = function() { loadArtNftOnScroll('@{collection.id}'); }
</script>